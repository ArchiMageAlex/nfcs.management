<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Типы активностей</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel='stylesheet'
	href='webjars/bootstrap/3.2.0/css/bootstrap.min.css'>
<style>
.navigation-order {
	margin-bottom: 30px;
}
</style>
</head>
<BODY>
	<div class="container">
		<div th:include="layout :: authFragment" class="row"></div>

		<div class="row">
			<H1>Типы активностей</H1>
			<TABLE class="table table-bordered">
				<THEAD>
					<TR>
						<TH>Наименование</TH>
						<TH>Описание</TH>
					</TR>
				</THEAD>
				<tbody>
					<tr th:each="at : ${entities}">
						<td th:text="${at.name}"></td>
						<td th:text="${at.description}"></td>
					</tr>
				</tbody>
			</TABLE>
		</div>
		<div class="row">
			<form action="saveactivitytype" method="post">
				<div class="form-group">
					<label for="name">Наименование:</label> <input type="text"
						class="form-control" id="name" />
				</div>
				<div class="form-group">
					<label for="description">Описание:</label> <input type="text"
						class="form-control" id="description" />
				</div>
				<button type="submit" class="btn btn-default" id="btn_submit">Добавить</button>
			</form>
		</div>
	</div>
	<script type="text/javascript" src="webjars/jquery/3.2.1/jquery.js"></script>
	<script type="text/javascript"
		src="webjars/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="application/javascript">
		
		
    $(document).ready(function () {
       $('#btn_submit').on("click",function (e) {
           e.preventDefault();
           var name, description;
           name = $('#name').val();
           description = $('#description').val();
           if($.trim(name) === ""){
               alert("Name cannot be empty");
           }
           else if($.trim(description) === ""){
               alert("Description cannot be empty");
           }
           else {
               var data = {};
               data["name"] = name;
               data["description"] = description;
               $.ajax({
                   type: "POST",
                   contentType: "application/json",
                   url: "/ita-1/activitytypes/save",
                   data: JSON.stringify(data),
                   dataType: 'json',
                   timeout: 6000,
                   success: function (data) {
                       if (confirm("Activity type with Id " + data + " saved")){
                           window.location.reload();
                       }
                   }
               });
           }
       });
    });

	
	</script>
</BODY>
</HTML>